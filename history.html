<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>History - Stinky Phishing Detector</title>
    <link rel="stylesheet" href="styles.css" />
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    
    <script>
        // Function to handle the block action
        function blockUrl(url) {
            // Get existing blocked URLs from localStorage
            let blockedUrls = JSON.parse(localStorage.getItem("blockedUrls")) || [];

            // Add the new URL to the list if it's not already blocked
            if (!blockedUrls.includes(url)) {
                blockedUrls.push(url);
                localStorage.setItem("blockedUrls", JSON.stringify(blockedUrls));
                alert(url + " has been added to the blocklist!");
            } else {
                alert(url + " is already in the blocklist.");
            }

            // Redirect to the blocked.html page
            window.location.href = "blocked.html";
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="sidebar" id="sidebar">
            <div class="profile">
              <img src="icons/logo.jpeg" alt="Profile Image" class="profile-img">
                <h2>Stinky</h2>
            </div>

            <ul class="menu">
                <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <h3>Settings</h3>
                <li><a href="history.html"><i class="fas fa-history"></i> History</a></li>
                <li><a href="blocked.html"><i class="fas fa-ban"></i> Blocked</a></li>
            </ul>

            <ul class="submenu">
                <h3>Help</h3>
                <li><a href="about us.html"><i class="fas fa-info-circle"></i> About Us</a></li>
                <li><a href="faqs.html"><i class="fas fa-question-circle"></i> FAQs</a></li>
            </ul>
        </div>

        <div class="main-content">
            <header>
                <h1>History</h1>
            </header>

            <table>
                <thead>
                    <tr>
                        <th>Email</th>
                        <th>Date Detected</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>http://malicious-site.com</td>
                        <td>2024-10-20</td>
                        <td class="detected-status">Phishing</td>
                        <td>
                            <button
                                class="block-button"
                                onclick="blockUrl('http://malicious-site.com')"
                            >
                                Block
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>http://safe-site.com</td>
                        <td>2024-10-19</td>
                        <td class="safe-status">Safe</td>
                        <td>
                            <button
                                class="block-button"
                                onclick="blockUrl('http://safe-site.com')"
                            >
                                Block
                            </button>
                        </td>
                    </tr>
                    <!-- Add more history records as needed -->
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
